# Functional Programming

1. Functional Programming?

   - 순수한 함수를 조합해 프로그래밍 하는 방법
   - 공유 상태, 변경 가능한 데이터, 사이드 이팩트를 피하여 소프트웨어를 만드는 프로세스
   - 함수형 프로그래밍은 명령형(객체 지향, 절차 지향)이 아닌 <b>선언형</b>이다

2. 주요 개념

   1. 1급 객체(First Object)

      - 다음의 조건을 만족하는 객체

      ```
      * 변수에 담을 수 있다.
      * 파라미터로 전달 할 수 있다.
      * 리턴값으로 전달 할 수 있다.

      const a = {massage: "a는 1급 객체입니다"} //변수에 담을 수 있음
      function f1 (a) { //파라미터로 넘길 수 있음
          return a; //return으로 전달할 수 있음
      }
      ```

      - 1급 함수라고도 표현함
      - 자바스크립트의 경우엔 함수도 객체가 될 수 있으므로 함수가 1급 객체가 되며, 자바의 경우엔 람다를 이용해서 구현할 수 있음

   2. 고차 함수(High-Order Function)

      - 함수를 인자로 전달받거나 함수를 결과로 반환하는 함수
      - 고차 함수는 인자로 받은 함수를 필요한 시점에 호출하거나 클로저를 생성하여 반환
      - 고차 함수가 아닌 함수는 일차 함수라고 함

      ```
      // 고차 함수
      function makeCounter(func) {
          var count = 0;
          return function () {
              count = func(count);
              return count;
          }
      }

      const mc1 = makeCounter(n => n++);
      ```

   3. 불변성(Immutablility)

      - 상태를 변경하지 않는 것
      - 단순히 변수를 변경하는것이 아닌, 메모리에 저장된 값을 변경하는 모든 행위
      - java에서 불변객체는 final 키워드를 붙여주면 됨

   4. 순수 함수(Pure function)

      - 어떤 함수에 동일한 인자를 주었을 때 항상 같은 값을 리턴하는 함수
      - 부수효과가 없는 함수
      - 부수효과란, 외부의 상태를 변경하거나 함수로 들어온 인자의 상태를 직접 변경하는 것

      ```
      // javascript 코드
      // 순수함수
      function add(a,b) {
         return a + b;
      }
      console.log(add(10, 5)); //항상 같은 값을 리턴하므로 순수함수

      -----

      const c = 10
      function add(a, b, c) {
         return a + b + c;
      }

      console.log(add(10, 5)); //외부 변수 c에 의해 값이 변할 수 있으므로 순수함수가 아님

      -----

      const c = 10
      function add(a, b, c) {
         c = b; //외부 상태에 영향을 끼침(=부수효과)
         return a + b;
      }

      console.log(add(10, 5)); //리턴값은 항상 같지만, 외부 변수 c에 영향을 끼치므로 순수함수가 아님
      ```

   5. 데이터 변환 방법

      - 함수형 프로그래밍은 데이터 변경이 불가능하기 때문에(변경 가능한 상태를 피하기 때문) 기존 데이터 복사본을 만들어두는 도구들이 필요
      - map(), reduce(), filter()...등의 함수가 있음

   6. 합성 함수(Function composition)

      - 새로운 함수를 만들거나 계산하기 위해 둘 이상의 함수를 조합하는 과정
      - 함수형 프로그래밍은 여러가지 작은 순수 함수들로 이루어져 있기 때문에 이 함수들을 연쇄적으로 또는 병렬로 호출하여 더 큰 함수를 만드는 과정으로 전체 프로그램을 구축해야 함

      ```
      // javascript 코드
      // 메서드 체이닝 방식

      const sum = (a, b) => a + b
      const square = x => x * x
      const addTen = x => x + 10

      const computeNumbers = addTen(square(sum(3, 5))) // 74

      // compose는 함수를 연쇄적으로 호출하면서 반환값을 전달한다
      const compose = (...fns) =>
      fns.reduce((prevFn, nextFn) =>
         (...args) => nextFn(prevFn(...args)),
      );

      // compose의 사용
      const compute = compose(
      sum,
      square,
      addTen
      )
      compute(3, 5)
      ```

   7. Side Effects(부작용)
      - 함수가 함수 외부의 객체나 변수를 변경하게 되면 의도치 않은 동작을 야기할 수 있는데, 이를 side effect라 함
      - 함수형 프로그래밍과 절차형 프로그래밍의 차이점 중 하나로, 함수형은 부작용이 존재하지 않으나, 절차형은 부작용이 존재할 수 있음
      - 함수형 프로그래밍은 상태를 변화시키지 않고, 공유 상태(공유 객체)를 피해 프로그래밍 하기 때문에 부작용이 존재하지 않음

3. 구현 규칙

   - 모든 데이터는 변경이 불가능 해야 함(불변성)
   - 함수는 순수 함수로 만들어야 하며, 인자를 하나 이상 받게 하고, 데이터나 다른 함수를 반환해야 함(입력값과 출력값이 있어야 함)
   - 루프(for, while...)보다는 재귀를 사용

4. 명령형과 선언형 프로그래밍

   1. 명령형 프로그래밍?

      - 어떻게(HOW) 할 것인지를 설명하는 방식의 프로그래밍 기법
      - 알고리즘을 명시하고 목표는 명시하지 않음
      - 원하는 결과를 달성하는 과정이 중요
      - 절차형 프로그래밍, 객체 지향 프로그래밍이 이에 해당
      - 주요 언어: C, C++, C#, JAVA, Ruby...

   2. 선언형 프로그래밍?
      - 무엇을(WHAT) 할 것인지 정의하는 방식의 프로그래밍 기법
      - 목표를 명시하고 알고리즘은 명시하지 않음
      - 과정보다는 원하는 결과를 얻었는지 아닌지가 중요
      - 선언형 방식이 제대로 동작하기 위해서는 명령형에서 "어떻게"가 구현된 것이 추상화 되어있어야 함
      - 함수형 프로그래밍, 논리형 프로그래밍등이 이에 해당
      - 주요 언어: Haskell, SQL...

   ```
   Q. 송내역에서 신대방삼거리역으로 가려면?
   명령형: 1호선 송내역 승차 -(5개 역 이동)-> 온수역 하차 -> 7호선 온수역 승차 -(9개 역 이동)-> 신대방삼거리역 하차
   선언형: 송내역의 주소는 "경기 부천시 송내동" 이며, 신대방삼거리의 주소는 "서울특별시 동작구 상도로 76" 입니다.
   ```
